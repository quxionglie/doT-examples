<!DOCTYPE HTML>
<html>
<head>
		<script src="../doT.min.js" type="text/javascript"></script>
</head>
<body>
	
	
<script id="pagetmpl" type="text/x-dot-template">
{{##def.snippet:
<div>{{=it.name}}</div>{{#def.joke}}
#}}

{{#def.snippet}}
</script>

<div id="content"></div>

</body>

<script type="text/javascript">
		var def = {"joke":"<div>{{=it.name}} who?</div>"};
		var data = {"name":"Jake","age":31};

		var pagefn = doT.template(document.getElementById('pagetmpl').text, undefined, def);

		var text = pagefn(data);
		console.log(text);
		document.getElementById('content').innerHTML = text;
</script>

<!--
function anonymous(it /**/) { var out='<div>'+(it.name)+'</div><div>'+(it.name)+' who?</div>';return out; }
-->
</html>